{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect, useState } from 'react';\nconst apiKey = process.env.REACT_APP_API_KEY;\nexport const useMovies = searchTerm => {\n  _s();\n\n  const [lastSearchTermApiCalled, setLastSearchTermApiCalled] = useState(null);\n  const [apiResults, setApiResults] = useState(null);\n  const [totalResults, setTotalResults] = useState(0);\n  const [currentPage, setCurrentPage] = useState(1); // SEARCH MOVIE\n\n  const searchEndPoint = `https://api.themoviedb.org/3/search/movie?api_key=${apiKey}&query=${searchTerm}`; // TOP250 SEARCH\n\n  const top250EndPoint = process.env.REACT_APP_TOP250_END_POINT;\n\n  const nextPage = pageNumber => {};\n\n  const fetchData = url => {\n    fetch(url).then(res => {\n      return res.json();\n    }).then(data => {\n      console.log('Got movies list from API :>> ', data);\n      setTotalResults(data.total_results);\n      return data.results;\n    }).then(data => {\n      return new Promise(async resolve => {\n        console.log('Starting to load each movie in a loop...');\n\n        for (let i = 0; i < data.length; i++) {\n          const oneMovie = data[i]; // console.log(`Loading movie ${oneMovie.id}...`);\n\n          const movieDataApiResult = await fetch(`https://api.themoviedb.org/3/movie/${oneMovie.id}?api_key=${apiKey}&language=en-US`);\n          const movieData = await movieDataApiResult.json();\n          oneMovie.movieData = movieData;\n        }\n\n        resolve(data);\n      });\n    }).then(data => {\n      console.log('REACHED THE END OF ALL FETCHING!!!', data);\n      setApiResults(data);\n    });\n  };\n\n  if (searchTerm !== '' && searchTerm !== lastSearchTermApiCalled) {\n    setApiResults(null);\n    setLastSearchTermApiCalled(searchTerm);\n    fetchData(searchEndPoint);\n  } else if (searchTerm === '') {\n    fetchData(top250EndPoint);\n  }\n\n  const isLoading = searchTerm !== '' && apiResults === null;\n  return {\n    isLoading,\n    movies: apiResults === undefined || apiResults === null ? [] : apiResults\n  };\n};\n\n_s(useMovies, \"95EytZTL8YylEqegAojqurs1Gdw=\");","map":{"version":3,"sources":["/Users/olimostovyi/Documents/WebDev/projects/movie-search-app/client/src/hooks/useMovies.js"],"names":["useEffect","useState","apiKey","process","env","REACT_APP_API_KEY","useMovies","searchTerm","lastSearchTermApiCalled","setLastSearchTermApiCalled","apiResults","setApiResults","totalResults","setTotalResults","currentPage","setCurrentPage","searchEndPoint","top250EndPoint","REACT_APP_TOP250_END_POINT","nextPage","pageNumber","fetchData","url","fetch","then","res","json","data","console","log","total_results","results","Promise","resolve","i","length","oneMovie","movieDataApiResult","id","movieData","isLoading","movies","undefined"],"mappings":";;AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AAEA,MAAMC,MAAM,GAAGC,OAAO,CAACC,GAAR,CAAYC,iBAA3B;AAEA,OAAO,MAAMC,SAAS,GAAGC,UAAU,IAAI;AAAA;;AACrC,QAAM,CAACC,uBAAD,EAA0BC,0BAA1B,IAAwDR,QAAQ,CAAC,IAAD,CAAtE;AACA,QAAM,CAACS,UAAD,EAAaC,aAAb,IAA8BV,QAAQ,CAAC,IAAD,CAA5C;AACA,QAAM,CAACW,YAAD,EAAeC,eAAf,IAAkCZ,QAAQ,CAAC,CAAD,CAAhD;AACA,QAAM,CAACa,WAAD,EAAcC,cAAd,IAAgCd,QAAQ,CAAC,CAAD,CAA9C,CAJqC,CAMrC;;AACA,QAAMe,cAAc,GAAI,qDAAoDd,MAAO,UAASK,UAAW,EAAvG,CAPqC,CAQrC;;AACA,QAAMU,cAAc,GAAGd,OAAO,CAACC,GAAR,CAAYc,0BAAnC;;AAEA,QAAMC,QAAQ,GAAGC,UAAU,IAAI,CAAE,CAAjC;;AACA,QAAMC,SAAS,GAAGC,GAAG,IAAI;AACvBC,IAAAA,KAAK,CAACD,GAAD,CAAL,CACGE,IADH,CACQC,GAAG,IAAI;AACX,aAAOA,GAAG,CAACC,IAAJ,EAAP;AACD,KAHH,EAIGF,IAJH,CAIQG,IAAI,IAAI;AACZC,MAAAA,OAAO,CAACC,GAAR,CAAY,+BAAZ,EAA6CF,IAA7C;AACAd,MAAAA,eAAe,CAACc,IAAI,CAACG,aAAN,CAAf;AACA,aAAOH,IAAI,CAACI,OAAZ;AACD,KARH,EASGP,IATH,CASQG,IAAI,IAAI;AACZ,aAAO,IAAIK,OAAJ,CAAY,MAAMC,OAAN,IAAiB;AAClCL,QAAAA,OAAO,CAACC,GAAR,CAAY,0CAAZ;;AACA,aAAK,IAAIK,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGP,IAAI,CAACQ,MAAzB,EAAiCD,CAAC,EAAlC,EAAsC;AACpC,gBAAME,QAAQ,GAAGT,IAAI,CAACO,CAAD,CAArB,CADoC,CAEpC;;AACA,gBAAMG,kBAAkB,GAAG,MAAMd,KAAK,CACnC,sCAAqCa,QAAQ,CAACE,EAAG,YAAWpC,MAAO,iBADhC,CAAtC;AAGA,gBAAMqC,SAAS,GAAG,MAAMF,kBAAkB,CAACX,IAAnB,EAAxB;AACAU,UAAAA,QAAQ,CAACG,SAAT,GAAqBA,SAArB;AACD;;AACDN,QAAAA,OAAO,CAACN,IAAD,CAAP;AACD,OAZM,CAAP;AAaD,KAvBH,EAwBGH,IAxBH,CAwBQG,IAAI,IAAI;AACZC,MAAAA,OAAO,CAACC,GAAR,CAAY,oCAAZ,EAAkDF,IAAlD;AACAhB,MAAAA,aAAa,CAACgB,IAAD,CAAb;AACD,KA3BH;AA4BD,GA7BD;;AA+BA,MAAIpB,UAAU,KAAK,EAAf,IAAqBA,UAAU,KAAKC,uBAAxC,EAAiE;AAC/DG,IAAAA,aAAa,CAAC,IAAD,CAAb;AACAF,IAAAA,0BAA0B,CAACF,UAAD,CAA1B;AACAc,IAAAA,SAAS,CAACL,cAAD,CAAT;AACD,GAJD,MAIO,IAAIT,UAAU,KAAK,EAAnB,EAAuB;AAC5Bc,IAAAA,SAAS,CAACJ,cAAD,CAAT;AACD;;AAED,QAAMuB,SAAS,GAAGjC,UAAU,KAAK,EAAf,IAAqBG,UAAU,KAAK,IAAtD;AAEA,SAAO;AACL8B,IAAAA,SADK;AAELC,IAAAA,MAAM,EAAE/B,UAAU,KAAKgC,SAAf,IAA4BhC,UAAU,KAAK,IAA3C,GAAkD,EAAlD,GAAuDA;AAF1D,GAAP;AAID,CAzDM;;GAAMJ,S","sourcesContent":["import { useEffect, useState } from 'react';\n\nconst apiKey = process.env.REACT_APP_API_KEY;\n\nexport const useMovies = searchTerm => {\n  const [lastSearchTermApiCalled, setLastSearchTermApiCalled] = useState(null);\n  const [apiResults, setApiResults] = useState(null);\n  const [totalResults, setTotalResults] = useState(0);\n  const [currentPage, setCurrentPage] = useState(1);\n\n  // SEARCH MOVIE\n  const searchEndPoint = `https://api.themoviedb.org/3/search/movie?api_key=${apiKey}&query=${searchTerm}`;\n  // TOP250 SEARCH\n  const top250EndPoint = process.env.REACT_APP_TOP250_END_POINT;\n\n  const nextPage = pageNumber => {};\n  const fetchData = url => {\n    fetch(url)\n      .then(res => {\n        return res.json();\n      })\n      .then(data => {\n        console.log('Got movies list from API :>> ', data);\n        setTotalResults(data.total_results);\n        return data.results;\n      })\n      .then(data => {\n        return new Promise(async resolve => {\n          console.log('Starting to load each movie in a loop...');\n          for (let i = 0; i < data.length; i++) {\n            const oneMovie = data[i];\n            // console.log(`Loading movie ${oneMovie.id}...`);\n            const movieDataApiResult = await fetch(\n              `https://api.themoviedb.org/3/movie/${oneMovie.id}?api_key=${apiKey}&language=en-US`\n            );\n            const movieData = await movieDataApiResult.json();\n            oneMovie.movieData = movieData;\n          }\n          resolve(data);\n        });\n      })\n      .then(data => {\n        console.log('REACHED THE END OF ALL FETCHING!!!', data);\n        setApiResults(data);\n      });\n  };\n\n  if (searchTerm !== '' && searchTerm !== lastSearchTermApiCalled) {\n    setApiResults(null);\n    setLastSearchTermApiCalled(searchTerm);\n    fetchData(searchEndPoint);\n  } else if (searchTerm === '') {\n    fetchData(top250EndPoint);\n  }\n\n  const isLoading = searchTerm !== '' && apiResults === null;\n\n  return {\n    isLoading,\n    movies: apiResults === undefined || apiResults === null ? [] : apiResults\n  };\n};\n"]},"metadata":{},"sourceType":"module"}